// Campaign data storage (using JavaScript variables instead of localStorage)
let campaignsData = [
    {
        id: 1,
        title: "‡∏•‡∏î‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß",
        description: "‡∏£‡∏ì‡∏£‡∏á‡∏Ñ‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô",
        icon: "üå±",
        supporters: 2547,
        target: 5000,
        details: {
            problem: "‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡∏¢‡πà‡∏≠‡∏¢‡∏™‡∏•‡∏≤‡∏¢‡∏¢‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏ô‡πÄ‡∏õ‡∏∑‡πâ‡∏≠‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏¥‡πÄ‡∏ß‡∏®",
            solution: "‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏ä‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß",
            impact: "‡∏´‡∏≤‡∏Å‡πÄ‡∏£‡∏≤‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÑ‡∏î‡πâ 50% ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Ç‡∏¢‡∏∞‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏õ‡∏µ‡∏•‡∏∞ 2.5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏ô"
        }
    },
    {
        id: 2,
        title: "‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏¥‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏®‡∏π‡∏ô‡∏¢‡πå",
        description: "‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏¥‡πâ‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤",
        icon: "üçö",
        supporters: 1823,
        target: 3000,
        details: {
            problem: "‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢‡∏°‡∏µ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏¥‡πâ‡∏á‡∏õ‡∏µ‡∏•‡∏∞ 17 ‡∏•‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ç‡∏¢‡∏∞",
            solution: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡πÅ‡∏ú‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ä‡πâ",
            impact: "‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏î‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏î‡πâ 30% ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏¢‡∏≤‡∏Å‡πÑ‡∏£‡πâ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 100,000 ‡∏Ñ‡∏ô"
        }
    },
    {
        id: 3,
        title: "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏∏‡∏°‡∏ä‡∏ô",
        description: "‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô",
        icon: "‚ö°",
        supporters: 3456,
        target: 8000,
        details: {
            problem: "‡∏Å‡∏≤‡∏£‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ü‡∏≠‡∏™‡∏ã‡∏¥‡∏•‡∏™‡πà‡∏á‡∏ú‡∏•‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏°‡∏°‡∏•‡∏û‡∏¥‡∏©‡∏ó‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏†‡∏≤‡∏û‡∏†‡∏π‡∏°‡∏¥‡∏≠‡∏≤‡∏Å‡∏≤‡∏®",
            solution: "‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÅ‡∏™‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡πÅ‡∏•‡∏∞‡∏•‡∏°‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¥‡∏™‡∏£‡∏∞‡∏ó‡∏≤‡∏á‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô",
            impact: "‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Å‡πä‡∏≤‡∏ã‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡πÑ‡∏î‡πâ 40% ‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡πÑ‡∏î‡πâ 60%"
        }
    },
    {
        id: 4,
        title: "‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏õ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏õ‡πà‡∏≤",
        description: "‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏¥‡πÄ‡∏ß‡∏®‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û",
        icon: "ü¶é",
        supporters: 5234,
        target: 10000,
        details: {
            problem: "‡∏õ‡πà‡∏≤‡πÑ‡∏ú‡πà‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏õ‡∏µ‡∏•‡∏∞ 500,000 ‡πÑ‡∏£‡πà ‡∏™‡πà‡∏á‡∏ú‡∏•‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏õ‡πà‡∏≤‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå",
            solution: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå ‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏õ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏¥‡∏ï‡∏™‡∏≥‡∏ô‡∏∂‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå",
            impact: "‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡πà‡∏≤‡πÑ‡∏î‡πâ 1 ‡∏•‡πâ‡∏≤‡∏ô‡πÑ‡∏£‡πà ‡πÅ‡∏•‡∏∞‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏õ‡πà‡∏≤‡∏´‡∏≤‡∏¢‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 500 ‡∏ä‡∏ô‡∏¥‡∏î"
        }
    }
];

// User support tracking (using JavaScript variables)
let userSupports = new Set();

// DOM elements
const campaignsGrid = document.getElementById('campaignsGrid');
const modal = document.getElementById('campaignModal');
const closeBtn = document.querySelector('.close');
const supportBtn = document.getElementById('supportBtn');
const successMessage = document.getElementById('successMessage');

// Initialize the app
function init() {
    renderCampaigns();
    setupEventListeners();
}

// Render campaign cards
function renderCampaigns() {
    campaignsGrid.innerHTML = '';
    
    campaignsData.forEach(campaign => {
        const progressPercent = Math.min((campaign.supporters / campaign.target) * 100, 100);
        
        const cardHTML = `
            <div class="campaign-card" onclick="openModal(${campaign.id})">
                <div class="campaign-image">
                    ${campaign.icon}
                </div>
                <div class="campaign-content">
                    <h3 class="campaign-title">${campaign.title}</h3>
                    <p class="campaign-description">${campaign.description}</p>
                    <div class="campaign-stats">
                        <span class="supporters-count">${campaign.supporters.toLocaleString()} ‡∏Ñ‡∏ô</span>
                        <span class="campaign-target">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ ${campaign.target.toLocaleString()}</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progressPercent}%"></div>
                    </div>
                </div>
            </div>
        `;
        
        campaignsGrid.innerHTML += cardHTML;
    });
}

// Open modal with campaign details
function openModal(campaignId) {
    const campaign = campaignsData.find(c => c.id === campaignId);
    if (!campaign) return;

    const progressPercent = Math.min((campaign.supporters / campaign.target) * 100, 100);
    
    document.getElementById('modalTitle').textContent = campaign.title;
    document.getElementById('modalDescription').textContent = campaign.description;
    
    const detailsHTML = `
        <div class="detail-section">
            <h4 class="detail-title">üîç ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏ú‡∏ä‡∏¥‡∏ç</h4>
            <p class="detail-content">${campaign.details.problem}</p>
        </div>
        <div class="detail-section">
            <h4 class="detail-title">üí° ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</h4>
            <p class="detail-content">${campaign.details.solution}</p>
        </div>
        <div class="detail-section">
            <h4 class="detail-title">üéØ ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á</h4>
            <p class="detail-content">${campaign.details.impact}</p>
        </div>
    `;
    
    document.getElementById('modalDetails').innerHTML = detailsHTML;
    document.getElementById('modalSupporters').textContent = `${campaign.supporters.toLocaleString()} ‡∏Ñ‡∏ô‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô`;
    document.getElementById('modalTarget').textContent = `‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ ${campaign.target.toLocaleString()} ‡∏Ñ‡∏ô`;
    document.getElementById('modalProgress').style.width = `${progressPercent}%`;
    
    // Check if user already supported this campaign
    const isSupported = userSupports.has(campaignId);
    supportBtn.textContent = isSupported ? '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡πÅ‡∏•‡πâ‡∏ß' : '‡∏£‡πà‡∏ß‡∏°‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô';
    supportBtn.disabled = isSupported;
    
    // Set up support button
    supportBtn.onclick = () => supportCampaign(campaignId);
    
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
}

// Close modal
function closeModal() {
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
    successMessage.style.display = 'none';
}

// Support campaign
function supportCampaign(campaignId) {
    if (userSupports.has(campaignId)) return;
    
    // Add support
    userSupports.add(campaignId);
    
    // Update campaign data
    const campaign = campaignsData.find(c => c.id === campaignId);
    campaign.supporters += 1;
    
    // Update UI
    supportBtn.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
    supportBtn.disabled = true;
    
    // Show success message
    successMessage.style.display = 'block';
    
    // Update progress bar and stats
    const progressPercent = Math.min((campaign.supporters / campaign.target) * 100, 100);
    document.getElementById('modalSupporters').textContent = `${campaign.supporters.toLocaleString()} ‡∏Ñ‡∏ô‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô`;
    document.getElementById('modalProgress').style.width = `${progressPercent}%`;
    
    // Re-render campaigns to update main page
    renderCampaigns();
    
    // Auto-hide success message after 3 seconds
    setTimeout(() => {
        successMessage.style.display = 'none';
    }, 3000);
}

// Setup event listeners
function setupEventListeners() {
    closeBtn.onclick = closeModal;
    
    window.onclick = (event) => {
        if (event.target === modal) {
            closeModal();
        }
    };
    
    // Smooth scrolling for navigation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Close modal on Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.style.display === 'block') {
            closeModal();
        }
    });
}

// Initialize app when DOM is loaded
document.addEventListener('DOMContentLoaded', init);